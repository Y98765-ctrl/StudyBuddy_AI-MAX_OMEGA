<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>StudyBuddy AI - MAX OMEGA</title>

<meta name="theme-color" content="#000814">
<link rel="manifest" href="manifest.json">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI,Arial}
body{
height:100vh;
display:flex;
flex-direction:column;
background:#000814;
color:white;
overflow:hidden;
}
canvas{
position:fixed;
top:0;
left:0;
z-index:0;
}
header{
padding:16px;
text-align:center;
background:rgba(255,255,255,0.05);
backdrop-filter:blur(10px);
z-index:1;
font-weight:bold;
letter-spacing:2px;
}
#chat{
flex:1;
overflow-y:auto;
padding:20px;
display:flex;
flex-direction:column;
z-index:1;
}
.msg{
max-width:80%;
padding:14px;
margin-bottom:12px;
border-radius:16px;
line-height:1.6;
animation:fade .25s ease;
}
.user{
align-self:flex-end;
background:linear-gradient(135deg,#0077b6,#00b4d8);
}
.bot{
align-self:flex-start;
background:rgba(255,255,255,0.08);
backdrop-filter:blur(10px);
}
@keyframes fade{
from{opacity:0;transform:translateY(8px)}
to{opacity:1;transform:translateY(0)}
}
#inputArea{
display:flex;
padding:15px;
background:rgba(255,255,255,0.05);
z-index:1;
}
input{
flex:1;
padding:12px;
border:none;
border-radius:25px;
outline:none;
}
button{
margin-left:10px;
padding:12px 20px;
border:none;
border-radius:25px;
background:#00b4d8;
color:white;
font-weight:bold;
cursor:pointer;
}
</style>
</head>

<body>

<header>StudyBuddy AI - MAX OMEGA</header>
<div id="chat"></div>

<div id="inputArea">
<input id="input" placeholder="Ask anything...">
<button onclick="send()">Send</button>
</div>

<script>

/* ======================
   MEMORY SYSTEM
====================== */
let memory={
history:[],
name:null
};

function remember(key,value){
localStorage.setItem(key,value);
}
function recall(key){
return localStorage.getItem(key);
}

/* ======================
   KNOWLEDGE DATABASE
====================== */
const KNOWLEDGE=[
{
topic:"life",
keywords:["meaning","purpose","free will","consciousness"],
response:"Life has no single universal meaning. Humans create purpose through growth, relationships, learning, and contribution."
},
{
topic:"science",
keywords:["universe","big bang","black hole","gravity","evolution"],
response:"The universe began around 13.8 billion years ago with the Big Bang."
},
{
topic:"psychology",
keywords:["anxiety","confidence","overthinking","lonely"],
response:"Mental strength improves with self-awareness, discipline, and positive habits."
},
{
topic:"technology",
keywords:["ai","algorithm","internet","coding"],
response:"Artificial Intelligence simulates reasoning using algorithms and data."
},
{
topic:"study",
keywords:["study","exam","focus","learn"],
response:"Best method: Active recall, spaced repetition, and practice testing."
}
];

/* ======================
   INTENT DETECTION
====================== */
function detectIntent(input){
let scores={};
KNOWLEDGE.forEach(k=>{
scores[k.topic]=0;
k.keywords.forEach(word=>{
if(input.includes(word)) scores[k.topic]++;
});
});
let best=null;
let high=0;
for(let t in scores){
if(scores[t]>high){
high=scores[t];
best=t;
}
}
return high>0?best:null;
}

/* ======================
   SAFE MATH
====================== */
function safeMath(input){
if(!/^[0-9+\-*/(). ]+$/.test(input)) return null;
try{
return Function('"use strict";return ('+input+')')();
}catch{return null;}
}

/* ======================
   BRAIN
====================== */
function brain(input){

memory.history.push(input);

if(input.includes("my name is")){
let name=input.replace("my name is","").trim();
remember("username",name);
return "Nice to meet you, "+name+".";
}

if(input.includes("what is my name")){
let name=recall("username");
return name? "Your name is "+name+"." : "You haven't told me yet.";
}

let math=safeMath(input);
if(math!==null) return "Result: "+math;

let topic=detectIntent(input);
if(topic){
return KNOWLEDGE.find(k=>k.topic===topic).response;
}

return "I can discuss life, science, psychology, study methods, technology, and calculate math.";
}

/* ======================
   CHAT SYSTEM
====================== */
const chat=document.getElementById("chat");

function add(text,type){
let div=document.createElement("div");
div.className="msg "+type;
div.innerText=text;
chat.appendChild(div);
chat.scrollTop=chat.scrollHeight;
}

function send(){
let input=document.getElementById("input");
let text=input.value.trim().toLowerCase();
if(!text)return;
add(text,"user");
input.value="";
setTimeout(()=>add(brain(text),"bot"),400);
}

document.getElementById("input")
.addEventListener("keypress",e=>{
if(e.key==="Enter")send();
});

/* ======================
   SERVICE WORKER
====================== */
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}

</script>

</body>
</html>
